<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Interview Result</title>

    <style>
      :root {
        --bg-dark: #020617;
        --bg-light: #f4f6f8;
        --card-dark: #0f172a;
        --card-light: #ffffff;
        --text-dark: #e5e7eb;
        --text-light: #020617;
        --accent: #38bdf8;
      }

      body {
        margin: 0;
        padding: 40px;
        font-family: Arial, sans-serif;
        background: var(--bg-dark);
        color: var(--text-dark);
        transition: 0.4s;
      }

      body.light {
        background: var(--bg-light);
        color: var(--text-light);
      }

      .container {
        max-width: 900px;
        margin: auto;
      }

      .card {
        background: var(--card-dark);
        padding: 30px;
        border-radius: 14px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }

      body.light .card {
        background: var(--card-light);
      }

      h1 {
        text-align: center;
        color: var(--accent);
      }

      .subtitle {
        text-align: center;
        margin-bottom: 25px;
        color: #94a3b8;
      }

      .score-box {
        text-align: center;
        font-size: 26px;
        font-weight: bold;
        margin-bottom: 15px;
      }

      .feedback {
        text-align: center;
        margin-bottom: 20px;
      }

      .soft-scores {
        background: rgba(255, 255, 255, 0.06);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 25px;
        text-align: center;
      }

      body.light .soft-scores {
        background: #e5e7eb;
      }

      .result-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 12px;
      }

      body.light .result-item {
        background: #f1f5f9;
      }

      .model-answer {
        display: none;
        margin-top: 8px;
        padding: 10px;
        background: rgba(56, 189, 248, 0.15);
        border-radius: 6px;
        font-size: 14px;
      }

      button {
        padding: 10px 20px;
        font-size: 14px;
        border: none;
        border-radius: 8px;
        background: var(--accent);
        cursor: pointer;
        font-weight: bold;
        margin-top: 8px;
      }

      .theme-toggle {
        position: fixed;
        top: 15px;
        right: 20px;
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: inherit;
      }
    </style>
  </head>

  <body>
    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™ / â˜€</button>

    <div class="container">
      <div class="card">
        <h1>Interview Completed ðŸŽ‰</h1>
        <p class="subtitle">Here is your AI Mock HR Interview performance</p>

        <div class="score-box" id="scoreBox"></div>
        <div class="feedback" id="feedback"></div>

        <div class="soft-scores" id="softScores"></div>

        <div id="resultList"></div>

        <div style="text-align: center; margin-top: 25px">
          <button onclick="viewReport()">View Performance Report</button>
          <button onclick="goHome()">Back to Home</button>
        </div>
      </div>
    </div>

    <script>
      function toggleTheme() {
        document.body.classList.toggle("light");
      }

      const MODEL_ANSWERS = {
        "Tell me about yourself":
          "My name is ____. I am from ____. I recently completed my studies and I am eager to start my career.",
        "What are your strengths?":
          "My strengths include communication skills, adaptability, and willingness to learn.",
        "What are your weaknesses?":
          "I sometimes overthink, but I am improving my time management skills.",
        "Why should we hire you?":
          "I am hardworking, motivated, and eager to contribute.",
        "Where do you see yourself in five years?":
          "I see myself growing professionally and taking more responsibility.",
        "Describe a challenge you faced":
          "Managing deadlines taught me better planning.",
        "How do you handle pressure?": "I stay calm and focus on solutions.",
        "What motivates you?": "Learning new skills and achieving goals.",
        "Tell me about a failure": "I learned valuable lessons from failure.",
        "What are your career goals?":
          "To grow and become skilled in my field.",
        "How do you handle criticism?": "I take it positively and improve.",
        "What do you know about our company?":
          "Your company values innovation and quality.",
        "Why did you choose this field?":
          "I enjoy problem-solving and learning.",
        "How do you manage time?": "By prioritizing tasks.",
        "What is your biggest achievement?": "Completing my academic projects.",
        "Describe teamwork experience":
          "I collaborated effectively with team members.",
        "How do you solve problems?":
          "By analyzing and finding logical solutions.",
        "Are you a leader or follower?": "I can adapt to both roles.",
        "How do you handle conflicts?": "Through calm communication.",
        "What makes you unique?": "My positive attitude.",
        "What are your hobbies?": "Learning, reading, and music.",
        "How do you learn new skills?": "Practice and online resources.",
        "What are your short-term goals?": "Gain practical experience.",
        "What are your long-term goals?": "Become an expert.",
        "How do you stay motivated?": "Setting goals.",
        "Describe your work ethic": "Disciplined and responsible.",
        "How do you adapt to change?": "By staying flexible.",
        "What inspires you?": "Success stories.",
        "How do you handle deadlines?": "Planning ahead.",
        "How do you handle stress?": "Staying organized.",
        "What do you expect from this role?": "Growth and learning.",
        "What kind of work environment do you prefer?":
          "Collaborative environment.",
        "How do you prioritize tasks?": "Based on importance.",
        "Describe your communication skills": "Clear and effective.",
        "How do you deal with failure?": "Learn and improve.",
        "What is your ideal job?": "A role with growth.",
        "What do you do under pressure?": "Focus on solutions.",
        "How do you define success?": "Achieving goals.",
        "Why should we trust you?": "I am honest.",
        "How do you improve yourself?": "Continuous learning.",
        "What are your technical skills?": "Programming basics.",
        "How do you stay organized?": "Task lists.",
        "Describe a difficult decision": "Managing priorities.",
        "How do you handle mistakes?": "Correct and learn.",
        "What are your values?": "Honesty and respect.",
        "What does teamwork mean to you?": "Working together.",
        "How do you manage expectations?": "Clear communication.",
        "What are you passionate about?": "Learning.",
        "Why do you want this job?": "Professional growth.",
      };

      const results =
        JSON.parse(localStorage.getItem("interviewResults")) || [];

      const list = document.getElementById("resultList");
      const scoreBox = document.getElementById("scoreBox");
      const feedbackEl = document.getElementById("feedback");
      const softScoresEl = document.getElementById("softScores");

      if (results.length === 0) {
        scoreBox.innerHTML = "Score: 0%";
        feedbackEl.innerHTML = "No interview data found.";
      } else {
        let totalScore = 0;
        let totalWords = 0;

        results.forEach((r) => {
          totalScore += r.score || 0;
          if (r.answer) totalWords += r.answer.split(" ").length;
        });

        let finalScore = Math.round((totalScore / (results.length * 20)) * 100);

        scoreBox.innerHTML = `Score: ${finalScore}%`;

        results.forEach((item, index) => {
          const modelAnswer =
            MODEL_ANSWERS[item.question] || "No model answer.";

          list.innerHTML += `
          <div class="result-item">
            <b>Q${index + 1}. ${item.question}</b><br/>
            <b>Your Answer:</b> ${item.answer}<br/>
            <b>Score:</b> ${item.score}/20<br/>
            <button onclick="toggleAnswer(${index})">Show Answer</button>
            <div class="model-answer" id="answer-${index}">
              <b>Model Answer:</b> ${modelAnswer}
            </div>
          </div>`;
        });
      }

      function toggleAnswer(i) {
        const el = document.getElementById("answer-" + i);
        el.style.display = el.style.display === "none" ? "block" : "none";
      }

      function viewReport() {
        window.location.href = "/performance";
      }

      function goHome() {
        window.location.href = "/";
      }
    </script>
  </body>
</html>
